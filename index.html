<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>RPS Game</title>
    </head>
    <body>
        <div class="container">
            <button id="rock">Rock</button>
            <button id="paper">Paper</button>
            <button id="scissors">Scissors</button>
        </div>
        <div class="display-container">
            <p class="humanScore">Human Score: 0</p>
            <p class="computerScore">Computer Score: 0</p>
        </div>
        <script>
            // create a function that returns the computer choice and make sure it's random
            function getComputerChoice() {
                let randomNum = Math.floor(Math.random() * 3);

                if (randomNum === 0) {
                    return "rock";
                }
                else if (randomNum === 1) {
                    return "paper";
                }
                else {
                    return "scissors";
                }
            }

            // create a function to play a round and decide a winner
            function playRound(humanChoice, computerChoice) {
                if (computerChoice == "rock") {
                    switch(humanChoice) {
                        case "rock":
                            return "Draw!"
                        case "paper":
                            humanScore++;
                            return "You won! Paper beats Rock"
                        case "scissors":
                            computerScore++;
                            return "You lose! Rock beats Scissors"
                    }
                }
                else if (computerChoice == "paper") {
                    switch(humanChoice) {
                        case "rock":
                            computerScore++;
                            return "You lose! Paper beats Rock"
                        case "paper":
                            return "Draw!"
                        case "scissors":
                            humanScore++;
                            return "You won! Scissors beats Paper"
                    }
                }
                switch(humanChoice) {
                    case "rock":
                        humanScore++;
                        return "You won! Rock beats Scissors"
                    case "paper":
                        computerScore++;
                        return "You lose! Scissors beats Paper"
                    case "scissors":
                        return "Draw!"
                }
            }

            const submitted = document.querySelector(".container");
            const display = document.querySelector(".display-container");

            // add an event listener to the parent div of buttons to use event delegation
            submitted.addEventListener("click", (e) => {
                let verdict = document.createElement("p");
                verdict.textContent = playRound(e.target.id, getComputerChoice());
                let currHumanScore = display.querySelector(".humanScore");
                let currComputerScore = display.querySelector(".computerScore");
                currHumanScore.textContent = `Human Score: ${humanScore}`;
                currComputerScore.textContent = `Computer Score: ${computerScore}`;
                display.appendChild(verdict);

                if (humanScore === 5) {
                    let humanWin = document.createElement("h3");
                    humanWin.textContent = "Congrats! You beat the computer!";
                    display.appendChild(humanWin);
                    humanScore = 0;
                    computerScore = 0;
                }
                else if (computerScore === 5) {
                    let computerWin = document.createElement("h3");
                    computerWin.textContent = "Too bad! You lost to the computer!";
                    display.appendChild(computerWin);
                    computerScore = 0;
                    humanScore = 0;
                }
            })

            let humanScore = 0;
            let computerScore = 0;      
        </script>
    </body>
</html>